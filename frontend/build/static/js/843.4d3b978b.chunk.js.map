{"version":3,"file":"static/js/843.4d3b978b.chunk.js","mappings":"sOAWA,MAAMA,EAAW,WAEF,SAASC,IACtB,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,WAAS,GAC3BC,GAAaC,EAAAA,EAAAA,QAAO,OACpB,MAAEC,EAAK,KAAEC,EAAI,QAAEC,IAAYC,EAAAA,EAAAA,MAC3BC,EAAaC,IACjBL,EAAM,CAAEM,IAAKb,EAAUc,MAAOC,KAAKC,UAAU,CAAEC,KAAM,EAAGC,KAAM,EAAGN,UAEjET,GAAQ,EAAM,EA0ChB,OAPAgB,EAAAA,EAAAA,YAAU,KA/BRhB,GAAQ,GACRiB,IAAAA,KAAY,CACVC,YAAa,CACXC,KAAM,OACNC,KAAM,aACNC,OAAQnB,EAAWoB,QACnBC,YAAa,CACXC,MAAO,IACPC,OAAQ,IACRC,WAAY,gBAGhBC,QAAS,CACPC,QAAS,CAAC,aAAc,iBAExBC,IACEA,EACFC,QAAQC,MAAM,6BAA8BF,GAG9CZ,IAAAA,OAAc,IAGhBA,IAAAA,YAAmBe,IAAiB,IAADC,EACHC,EAAAC,EAApB,OAANH,QAAM,IAANA,GAAkB,QAAZC,EAAND,EAAQI,kBAAU,IAAAH,GAAlBA,EAAoBI,OACtBP,QAAQQ,IAAI,UAAiB,OAANN,QAAM,IAANA,GAAkB,QAAZE,EAANF,EAAQI,kBAAU,IAAAF,OAAZ,EAANA,EAAoBG,MAC3C7B,EAAgB,OAANwB,QAAM,IAANA,GAAkB,QAAZG,EAANH,EAAQI,kBAAU,IAAAD,OAAZ,EAANA,EAAoBE,MAChC,IAMK,KACLpB,IAAAA,MAAa,IAEd,KAGDsB,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,EACEC,EAAAA,EAAAA,KAACC,EAAAA,EAAW,CAACC,SAAS,aACtBL,EAAAA,EAAAA,MAAA,OAAKM,UAAU,cAAaJ,SAAA,CACzBnC,IAAYoC,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEC,UAAW,UAAWN,UAACC,EAAAA,EAAAA,KAACM,EAAAA,EAAI,MAEtDjD,IAAS2C,EAAAA,EAAAA,KAAA,OAAKO,IAAK/C,EAAY4C,MAAO,CAAEtB,MAAO,OAAQC,OAAQ,IAAKsB,UAAW,UAAWN,UACzFC,EAAAA,EAAAA,KAACQ,EAAAA,EAAK,CAACC,YAAY,cAAcC,SAAWC,GAAQ7C,EAAU6C,EAAIhC,OAAOiC,OAAQR,MAAO,CAAES,OAAQ,GAAI/B,MAAO,YAG7GzB,IAAS2C,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEtB,MAAO,OAAQC,OAAQ,IAAKsB,UAAW,SAAUS,MAAO,QAASf,UAACC,EAAAA,EAAAA,KAACe,EAAAA,GAAM,CAACC,QAASA,IAAM1D,GAAQ,GAAMyC,SAAC,YAC9H1C,GAAQM,IAAY,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAMA,QAAUqC,EAAAA,EAAAA,KAAA,OAAKG,UAAU,cAAaJ,UAC7DC,EAAAA,EAAAA,KAACiB,EAAAA,EAAQ,CAACtD,KAAMA,EAAKA,KAAK,YAKpC,C","sources":["screens/scanner/index.tsx"],"sourcesContent":["\"use client\"\nimport { useState, useEffect, useRef } from \"react\";\nimport Quagga from \"quagga\";\nimport Breadcrumbs from \"../../components/Breadcrumbs\";\nimport {\n  Spin,\n  Input,\n  Button\n} from \"antd\";\nimport { useFetchByLoad } from \"../../contexts\";\nimport { ViewData } from \"../products/ViewData\";\nconst resource = \"products\";\n\nexport default function Lists() {\n  const [load, setLoad] = useState(true)\n  const barcodeRef = useRef(null);\n  const { fetch, data, loading } = useFetchByLoad();\n  const fetchData = (sku: any) => {\n    fetch({ url: resource, query: JSON.stringify({ skip: 0, take: 1, sku }) })\n    // Quagga.stop();\n    setLoad(false)\n  }\n\n  const initializeScanner = () => {\n    setLoad(true)\n    Quagga.init({\n      inputStream: {\n        name: 'Live',\n        type: 'LiveStream',\n        target: barcodeRef.current,\n        constraints: {\n          width: 640,\n          height: 480,\n          facingMode: 'environment'\n        },\n      },\n      decoder: {\n        readers: ['ean_reader', 'upc_reader'],\n      },\n    }, (err: any) => {\n      if (err) {\n        console.error('Error initializing Quagga:', err);\n        return;\n      }\n      Quagga.start();\n    });\n\n    Quagga.onDetected((result: any) => {\n      if (result?.codeResult?.code) {\n        console.log('Barcode', result?.codeResult?.code);\n        fetchData(result?.codeResult?.code)\n      }\n    });\n  };\n\n  useEffect(() => {\n    initializeScanner()\n    return () => {\n      Quagga.stop();\n    };\n  }, []);\n\n  return (\n    <>\n      <Breadcrumbs pageName=\"Scanner\" />\n      <div className=\"viewDetails\">\n        {loading && (<div style={{ textAlign: 'center' }}><Spin /></div>)}\n\n        {load && (<div ref={barcodeRef} style={{ width: '100%', height: 100, textAlign: \"center\" }}>\n          <Input placeholder=\"Basic usage\" onChange={(obj) => fetchData(obj.target.value)} style={{ margin: 20, width: \"80%\" }} />\n        </div>)}\n\n        {!load && (<div style={{ width: '100%', height: 100, textAlign: \"center\", clear: \"both\" }}><Button onClick={() => setLoad(true)}>Load</Button></div>)}\n        {(!load && data && data?.data) && (<div className=\"viewDetails\">\n          <ViewData data={data.data[0]} />\n        </div>)}\n      </div>\n    </>\n  );\n}"],"names":["resource","Lists","load","setLoad","useState","barcodeRef","useRef","fetch","data","loading","useFetchByLoad","fetchData","sku","url","query","JSON","stringify","skip","take","useEffect","Quagga","inputStream","name","type","target","current","constraints","width","height","facingMode","decoder","readers","err","console","error","result","_result$codeResult","_result$codeResult2","_result$codeResult3","codeResult","code","log","_jsxs","_Fragment","children","_jsx","Breadcrumbs","pageName","className","style","textAlign","Spin","ref","Input","placeholder","onChange","obj","value","margin","clear","Button","onClick","ViewData"],"sourceRoot":""}